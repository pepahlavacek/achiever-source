//
/* Chute.Chooser - v1.2.0 - Generated on: Thursday, February 27th, 2014, 5:28:59 PM
 * http://getchute.com
 * Copyright (c) 2014 Chute Corp */

(function(e,t){typeof define=="function"&&define.amd?define(t):(window.Chute=window.Chute||{},window.Chute.Chooser=t())})(this,function(){var e,t,n;return function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("components/bower/almond/almond",function(){}),function(){function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),r=n.exec(window.location.search);return r===null?null:decodeURIComponent(r[1].replace(/\+/g," "))}function t(e){var t=[];for(var n in e)e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function s(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1}var r=function(){var e,t=3,n=document.createElement("div"),r=n.getElementsByTagName("i");while(n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",r[0]);return t>4?t:e}(),i=navigator.userAgent.match(/CriOS/),o=function(t,n){typeof t=="object"&&(n=t,t=null),this.options=n||{},this.events={},this.callbacks={},this.options.width=this.options.width||720,this.options.height=this.options.height||500,this.windowHostURL=e("opener"),this.token=e("XDMessage_token"),this.isChildWindow=!t,this.options.popup&&r<10&&(this.options.popup=!1,this.log("Popups not supported in IE < 10")),this.options.popup&&i&&(this.options.popup=!1,this.log("Popups not supported on Chrome iOS"));if(!this.isChildWindow)this.frameURL=t,this.frameHostURL=this.frameURL.match(/\S+\/\/([^\/]+)\//)[0].slice(0,-1);else if(!this.windowHostURL)throw"opener parameter required"};o.prototype.open=function(){var e=this;this._startListening();if(this.frameURL){var n=document.location.protocol+"//"+document.location.host;this.token=(""+Math.random()).replace("0.","");var r=this.frameURL+(this.frameURL.indexOf("?")===-1?"?":"&")+t({opener:n,XDMessage_token:this.token});if(this.options.popup){var i=this.options.width,o=this.options.height,u=parseInt(screen.availWidth/2-i/2),a=parseInt(screen.availHeight/2-o/2),f;s()?f="status,resizable,scrollbars=1":f="width="+i+",height="+o+",status,resizable,scrollbars=1,left="+u+",top="+a+"screenX="+u+",screenY="+a,this.popup=window.open(r,"XDMessage_popup",f)}else{var l=document.createElement("iframe");l.setAttribute("frameborder","0"),l.src=r,l.style.overflow="auto",l.onload=this._frameReady,this.options.target?this.options.target.appendChild(l):document.body.appendChild(l),this.iframe=l}}else this.invoke("_ready",function(){e._ready()}),this.on("_close",function(){e.options.popup&&window.close()});this.on("_ready",function(t,n){n(),e._ready()})},o.prototype.close=function(){this.iframe?this.iframe.parentNode.removeChild(this.iframe):this.popup.close(),delete this.events,delete this.callbacks,this._stopListening()},o.prototype.on=function(e,t){typeof e=="string"&&typeof t=="function"&&(this.events[e]=t)},o.prototype.send=function(e,t,n){typeof t=="object"&&(n=t,t=null);var r=n||{};r.token=this.token;if(t){var i=""+Math.random();this.callbacks[i]=t,r.callback=i}var s={__xd_post_meta:r,body:e};this.log("Sending to"+(self.isChildWindow?" parent ":" frame ")),this.log(s),this._sendMessage(s)},o.prototype.invoke=function(e,t,n,r){typeof t=="function"&&(n=t,t=undefined),this.send(t,n,{method:e})},o.prototype._receiveMessage=function(e){var t=this.isChildWindow?this.windowHostURL:this.frameHostURL;if(e.origin===t){var n;try{n=JSON.parse(e.data)}catch(r){this.log("message data parsing failed, ignoring")}if(n&&typeof n.__xd_post_meta!="undefined"&&this.token===n.__xd_post_meta.token)if(typeof n.__xd_post_meta.callback_response=="string"){var i=this.callbacks[n.__xd_post_meta.callback_response];i(n.body),delete i}else{var s;n.__xd_post_meta.method?this.events[n.__xd_post_meta.method]&&(s=this.events[n.__xd_post_meta.method]):this.events.data&&(s=this.events.data);if(s)if(typeof n.__xd_post_meta.callback=="string"){var o=this;s(n.body,function(e){o.send(e,{callback_response:n.__xd_post_meta.callback})})}else s(n.body)}}},o.prototype._sendMessage=function(e){this.isChildWindow?window.opener?window.opener.postMessage(JSON.stringify(e),this.windowHostURL):window.parent&&window.parent.postMessage(JSON.stringify(e),this.windowHostURL):this.options.popup?this.popup.postMessage(JSON.stringify(e),this.frameHostURL):this.iframe.contentWindow.postMessage(JSON.stringify(e),this.frameHostURL)},o.prototype._startListening=function(){var e=this;e.listener=function(t){e._receiveMessage(t)},document.addEventListener?window.addEventListener("message",e.listener,!1):window.attachEvent("onmessage",e.listener)},o.prototype._stopListening=function(){document.removeEventListener?window.removeEventListener("message",this.listener,!1):window.detachEvent("onmessage",this.listener)},o.prototype._frameReady=function(){},o.prototype._ready=function(){this.events.ready&&this.events.ready()},o.prototype.log=function(e){this.options.verbose&&typeof console!="undefined"&&typeof console.log=="function"&&console.log(e)},typeof n=="function"&&n.amd?n("xdmessage",[],function(){return o}):typeof exports!="undefined"?exports.XDMessage=o:this.XDMessage=o,o.noConflict=function(){return this.XDMessage=_previousXDMessage,this}}.call(this),n("config",{api:{host:"api.getchute.com",protocol:"https:"}}),n("version",{number:"1.2.0",minor:"1.2",major:"1"}),n("proxy",["xdmessage","config","version"],function(e,t,n){var r=function(e,t){this.container=e,this.options=t,this.callbacks={}};return r.prototype.setupOnce=function(r){if(this.connection)r();else{var i=this,s=(t.api.protocol||document.location.protocol)+"//"+t.api.host+"/v2/widgets?client_id="+i.options.client_id;s+="&version="+n.minor,i.options.store_id&&(s+="&store_id="+i.options.store_id),i.options.development&&(s+="&development=1");var o=new e(s,{target:this.container,popup:this.options.popup,verbose:this.options.verbose,width:this.options.width,height:this.options.height});o.on("ready",function(){o.invoke("options",i.options,function(){typeof r=="function"&&r()})}),o.on("post",function(e,t){i.eventProxy(e,t)}),o.on("event",function(e,t){i.customRemoteEvent(e.eventName,e.stepName,e.data,t)}),o.open(),i.connection=o}},r.prototype.eventProxy=function(e,t){this.delegate.remoteEvent(e.event,e.step,e.state,t)},r.prototype.customRemoteEvent=function(e,t,n,r){this.delegate.remoteEvent(e,t,n,r)},r.prototype.invoke=function(e,t,n){typeof t=="function"&&(n=t,t={}),this.connection.invoke("event",{event:e,data:t},function(e){typeof n=="function"&&n(e)})},r.prototype.close=function(){this.connection.close()},r}),function(){var e={};(function(e){e.VERSION="1.0.rc.1",e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+e+"'")});var t=Object.prototype.toString,n="[object Function]";e.registerHelper("blockHelperMissing",function(r,i){var s=i.inverse||function(){},o=i.fn,u="",a=t.call(r);return a===n&&(r=r.call(this)),r===!0?o(this):r===!1||r==null?s(this):a==="[object Array]"?r.length>0?e.helpers.each(r,i):s(this):o(r)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.registerHelper("each",function(t,n){var r=n.fn,i=n.inverse,s="",o;n.data&&(o=e.createFrame(n.data));if(t&&t.length>0)for(var u=0,a=t.length;u<a;u++)o&&(o.index=u),s+=r(t[u],{data:o});else s=i(this);return s}),e.registerHelper("if",function(r,i){var s=t.call(r);return s===n&&(r=r.call(this)),!r||e.Utils.isEmpty(r)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){var r=n.fn,i=n.inverse;return n.fn=i,n.inverse=r,e.helpers["if"].call(this,t,n)}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t){e.log(t)})})(e),e.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.message=t.message},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()},function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/[&<>"'`]/g,r=/[&<>"'`]/,i=function(e){return t[e]||"&amp;"};e.Utils={escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":r.test(t)?t.replace(n,i):t},isEmpty:function(e){return typeof e=="undefined"?!0:e===null?!0:e===!1?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),e.Compiler=function(){},e.JavaScriptCompiler=function(){},function(t,n){t.prototype={compiler:t,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("pushLiteral","{}"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("pushLiteral","{}"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("push","{}");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.accept(r),this.opcode("assignToHash",n[0])},partial:function(e){var t=e.id;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.original),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0];this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i)},simpleMustache:function(e,t,n){var r=e.id;r.type==="DATA"?this.DATA(r):r.parts.length?this.ID(r):(this.addDepth(r.depth),this.opcode("getContext",r.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.string)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("pushLiteral","{}"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("pushLiteral","{}"),r}};var r=function(e){this.value=e};n.prototype={nameLookup:function(e,t,r){return/^[0-9]+$/.test(t)?e+"["+t+"]":n.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":"buffer += "+e+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,n,r,i){this.environment=t,this.options=n||{},e.log(e.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.compileChildren(t,n);var s=t.opcodes,o;this.i=0;for(u=s.length;this.i<u;this.i++)o=s[this.i],o.opcode==="DECLARE"?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(i)},nextOpcode:function(){var e=this.environment.opcodes,t=e[this.i+1];return e[this.i+1]},eat:function(e){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(t){var n=this.stackVars.concat(this.registers.list);n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", "));if(!this.isChild){var r=[];for(var i in this.context.aliases)this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var s=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var o=0,u=this.environment.depths.list.length;o<u;o++)s.push("depth"+this.environment.depths.list[o]);if(t)return s.push(this.source.join("\n  ")),Function.apply(this,s);var a="function "+(this.name||"")+"("+s.join(",")+") {\n  "+this.source.join("\n  ")+"}";return e.log(e.logger.DEBUG,a+"\n\n"),a},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),t+" = blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var e=this.nextOpcode(),t="";this.context.aliases.escapeExpression="this.escapeExpression",e&&e.opcode==="appendContent"&&(t=" + "+this.quotedString(e.args[0]),this.eat(e)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+t))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.pushStack(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+"() : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.pushStack(this.nameLookup("data",e,"data"))},pushStringParam:function(e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e)},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){this.pushStack(e)},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t);this.register("foundHelper",n.name),this.pushStack("foundHelper ? foundHelper.call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")")},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.pushStack(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var t=this.setupHelper(0,e),n=this.lastHelper=this.nameLookup("helpers",e,"helper");this.register("foundHelper",n);var r=this.nameLookup("depth"+this.lastContext,e,"context"),i=this.nextStack();this.source.push("if (foundHelper) { "+i+" = foundHelper.call("+t.callParams+"); }"),this.source.push("else { "+i+" = "+r+"; "+i+" = typeof "+i+" === functionType ? "+i+"() : "+i+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.pushStack("self.invokePartial("+t.join(", ")+");")},assignToHash:function(e){var t=this.popStack(),n=this.topStack();this.source.push(n+"['"+e+"'] = "+t+";")},compiler:n,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler,this.context.programs.push("");var u=this.context.programs.length;r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context)}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return n.length===0?"self.program("+i.join(", ")+")":(i.shift(),"self.programWithDepth("+i.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.compileStack.push(new r(e)),e},pushStack:function(e){return this.source.push(this.incrStack()+" = "+e+";"),this.compileStack.push("stack"+this.stackSlot),"stack"+this.stackSlot},replaceStack:function(e){var t=e.call(this,this.topStack());return this.source.push(this.topStack()+" = "+t+";"),"stack"+this.stackSlot},nextStack:function(e){var t=this.incrStack();return this.compileStack.push("stack"+this.stackSlot),t},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){var e=this.compileStack.pop();return e instanceof r?e.value:(this.stackSlot--,e)},topStack:function(){var e=this.compileStack[this.compileStack.length-1];return e instanceof r?e.value:e},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t){var n=[];this.setupParams(e,n);var r=this.nameLookup("helpers",t,"helper");return{params:n,name:r,callParams:["depth0"].concat(n).join(", "),helperMissingParams:["depth0",this.quotedString(t)].concat(n).join(", ")}},setupParams:function(e,t){var n=[],r=[],i,s,o;n.push("hash:"+this.popStack()),s=this.popStack(),o=this.popStack();if(o||s)o||(this.context.aliases.self="this",o="self.noop"),s||(this.context.aliases.self="this",s="self.noop"),n.push("inverse:"+s),n.push("fn:"+o);for(var u=0;u<e;u++)i=this.popStack(),t.push(i),this.options.stringParams&&r.push(this.popStack());return this.options.stringParams&&n.push("contexts:["+r.join(",")+"]"),this.options.data&&n.push("data:data"),t.push("{"+n.join(",")+"}"),t.join(", ")}};var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),s=n.RESERVED_WORDS={};for(var o=0,u=i.length;o<u;o++)s[i[o]]=!0;n.isValidJavaScriptVariableName=function(e){return!n.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(e.Compiler,e.JavaScriptCompiler),e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?e.VM.program(n,r):i?i:(i=this.programs[t]=e.VM.program(n),i)},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop};return function(r,i){return i=i||{},t.call(n,e,r,i.helpers,i.partials,i.data)}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(t,n,r,i,s,o){var u={helpers:i,partials:s,data:o};if(t===undefined)throw new e.Exception("The partial "+n+" could not be found");if(t instanceof Function)return t(r,u);if(!e.compile)throw new e.Exception("The partial "+n+" could not be compiled when running in runtime-only mode");return s[n]=e.compile(t,{data:o!==undefined}),s[n](r,u)}},e.template=e.VM.template,n("handlebars",[],function(){return e})}(),n("hbs",[],function(){return{get:function(){return Handlebars},write:function(e,t,n){if(t+customNameExtension in buildMap){var r=buildMap[t+customNameExtension];n.asModule(e+"!"+t,r)}},version:"0.4.0",load:function(e,t,n,r){}}}),n("hbs!src/templates/styles.css",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression;return s+="#chute-chooser-bg {\n  position: fixed;\n  z-index: 100;\n  top: 0;\n  left: 0;\n\n  opacity: 0;\n  width: 0;\n  height: 0;\n  overflow: hidden;\n\n  -webkit-transition: opacity ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+"s ease-in-out;\n     -moz-transition: opacity ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+"s ease-in-out;\n      -ms-transition: opacity ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+"s ease-in-out;\n          transition: opacity ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+'s ease-in-out;\n}\n#chute-chooser-bg.chute-chooser-open {\n  background: #000;\n  opacity: 0.6;\n  -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";\n  filter: alpha(opacity=60);\n  width: 100%;\n  height: 100%;\n}\n#chute-chooser-bg.chute-chooser-closing {\n  background: #000;\n  opacity: 0.2;\n  width: 100%;\n  height: 100%;\n}\n\n.',u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+" {\n  overflow-y: auto;\n  -webkit-overflow-scrolling:touch;\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-mode-lightbox {\n  position: fixed;\n  top: -",u=n.height,u?o=u.call(t,{hash:{}}):(o=t.height,o=typeof o===a?o():o),s+=f(o)+"px;\n  left: 50%;\n  z-index: 101;\n  margin-left: -",u=n.margin_left,u?o=u.call(t,{hash:{}}):(o=t.margin_left,o=typeof o===a?o():o),s+=f(o)+"px;\n\n  -webkit-transition: top ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+"s ease-in-out;\n     -moz-transition: top ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+"s ease-in-out;\n      -ms-transition: top ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+"s ease-in-out;\n          transition: top ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+"s ease-in-out;\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-opening {\n  width: ",u=n.width,u?o=u.call(t,{hash:{}}):(o=t.width,o=typeof o===a?o():o),s+=f(o)+"px;\n  height: ",u=n.height,u?o=u.call(t,{hash:{}}):(o=t.height,o=typeof o===a?o():o),s+=f(o)+"px;\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-open {\n  width: ",u=n.width,u?o=u.call(t,{hash:{}}):(o=t.width,o=typeof o===a?o():o),s+=f(o)+"px;\n  height: ",u=n.height,u?o=u.call(t,{hash:{}}):(o=t.height,o=typeof o===a?o():o),s+=f(o)+"px;\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-closing {\n  width: ",u=n.width,u?o=u.call(t,{hash:{}}):(o=t.width,o=typeof o===a?o():o),s+=f(o)+"px;\n  height: ",u=n.height,u?o=u.call(t,{hash:{}}):(o=t.height,o=typeof o===a?o():o),s+=f(o)+"px;\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-mode-lightbox.chute-chooser-open {\n  top: ",u=n.top,u?o=u.call(t,{hash:{}}):(o=t.top,o=typeof o===a?o():o),s+=f(o)+"px;\n}\n\n@media all and (max-width: ",u=n.width,u?o=u.call(t,{hash:{}}):(o=t.width,o=typeof o===a?o():o),s+=f(o)+"px) {\n  .",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-mode-lightbox {\n    left: 0;\n  }\n\n  .",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-mode-lightbox.chute-chooser-open {\n    width: 100%;\n    margin-left: 0;\n  }\n\n  .",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-closing {\n    width: 100%;\n    margin-left: 0;\n  }\n}\n\n@media all and (max-height: ",u=n.height,u?o=u.call(t,{hash:{}}):(o=t.height,o=typeof o===a?o():o),s+=f(o)+"px) {\n  .",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-mode-lightbox {\n    top: 0;\n  }\n  .",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-mode-lightbox.chute-chooser-open {\n    height: 100%;\n    top: 0;\n  }\n\n  .",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-closing {\n    height: 100%;\n  }\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+" .loader {\n  opacity: 0;\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n  background: #fff url(https://static.getchute.com/images/graybox.gif) no-repeat 50% 50%;\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".loading .loader {\n  opacity: 1;\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".loading iframe {\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+" iframe {\n  width: 100%;\n  height: 100%;\n  display: block;\n  background-color: #fff;\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-mode-embed {\n  position: relative;\n  border: 1px solid #8c9da4;\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-mode-embed .loader {\n  -webkit-transition: opacity ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+"s ease-in-out;\n     -moz-transition: opacity ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+"s ease-in-out;\n      -ms-transition: opacity ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+"s ease-in-out;\n          transition: opacity ",u=n.animation_duration,u?o=u.call(t,{hash:{}}):(o=t.animation_duration,o=typeof o===a?o():o),s+=f(o)+"s ease-in-out;\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-mode-embed iframe {\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+" .chute-chooser-close {\n  color: #fff;\n  cursor: pointer;\n  font-size: 30px;\n  line-height: 0.5;\n  position: absolute;\n  right: 12px;\n  top: 15px;\n  display: none;\n  z-index: 102;\n  text-shadow: 0 0 2px #000;\n  filter: progid:DXImageTransform.Microsoft.Glow(color=#808080,strength=1);\n  font-weight: 100;\n}\n\n.",u=n.base_class,u?o=u.call(t,{hash:{}}):(o=t.base_class,o=typeof o===a?o():o),s+=f(o)+".chute-chooser-mode-lightbox.chute-chooser-open .chute-chooser-close {\n  display: block;\n}\n",s});return t.registerPartial("src_templates_styles.css",n),n}),function(){var e={extend:function(){var e=arguments[0];for(var t=1;t<arguments.length;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e},append:function(e,t){var n=document.createElement("div");n.innerHTML=t;while(n.children.length>0)e.appendChild(n.children[0])},addCSS:function(e){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)},addClass:function(e,t){e.className+=" "+t},removeClass:function(e,t){e.className=e.className.replace(new RegExp(t.split(" ").join("|")),"")},remove:function(e){e&&e.parentNode.removeChild(e)},addEventHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},removeEventHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},getElementsByClassName:function(e,t){return document.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)},scrollBarWidth:function(){if(typeof e._scrollbarWidth=="undefined"){var t=document.createElement("div");t.setAttribute("style","width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"),document.body.appendChild(t),e._scrollbarWidth=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e._scrollbarWidth},hasPersistentScrollBar:function(){return e.scrollBarWidth()>0},mobileBrowser:function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)},supportsCSSTransitions:function(){var e=document.createElement("p").style,t="transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e;return t},windowSize:function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},reduceBackgroundOpacity:function(t,n){if($){var r=t.split(" .")[0],i=t.split(" .")[1],s=$("<"+r+"></"+r+">").appendTo("body"),o=$('<div class="'+i+'"></div>').appendTo(s),u=o.css("background-color").match(/\d+, ?\d+, ?\d+/)[0];u="rgba("+u+", "+n+")",s.remove(),e.addCSS(t+"{ background-color: "+u+" }")}}};typeof n=="function"&&n.amd?n("domHelper",[],function(){return e}):typeof exports!="undefined"?exports.DomHelper=e:this.DomHelper=e}.call(this),t.config({baseUrl:"/",paths:{domHelper:"components/domHelper"}}),n("popup",["domHelper"],function(e){var t=function(e,t){this.options=t||{},this.options.prefix=this.options.prefix||"chute-lightbox",this.options.animationDuration=this.options.animationDuration||300,this.element=e,this.events={}};return t.prototype.open=function(){var t=this;document.getElementById(this.options.prefix+"-bg")||e.append(document.body,'<div id="'+this.options.prefix+'-bg"></div>'),e.addClass(this.element,this.options.prefix+"-open"),e.addClass(document.getElementById(this.options.prefix+"-bg"),this.options.prefix+"-open");var n=function(){e.removeEventHandler(e.getElementsByClassName(t.element,t.options.prefix+"-close")[0],"click",n),t.close()};e.addEventHandler(e.getElementsByClassName(this.element,this.options.prefix+"-close")[0],"click",n)},t.prototype.close=function(){var t=this;e.removeClass(this.element,this.options.prefix+"-open"),e.removeClass(document.getElementById(this.options.prefix+"-bg"),this.options.prefix+"-open"),e.addClass(this.element,this.options.prefix+"-closing"),e.addClass(document.getElementById(this.options.prefix+"-bg"),this.options.prefix+"-closing"),setTimeout(function(){e.removeClass(t.element,t.options.prefix+"-closing"),e.removeClass(document.getElementById(t.options.prefix+"-bg"),t.options.prefix+"-closing")},this.options.animationDuration),typeof this.events["close"]=="function"&&this.events.close()},t.prototype.on=function(e,t){this.events[e]=t},t}),t.config({baseUrl:"/",paths:{hbs:"components/bower/require-handlebars-plugin/hbs",underscore:"components/bower/require-handlebars-plugin/hbs/underscore",i18nprecompile:"components/bower/require-handlebars-plugin/hbs/i18nprecompile",json2:"components/bower/require-handlebars-plugin/hbs/json2",handlebars:"components/bower/require-handlebars-plugin/handlebars",domHelper:"components/domHelper",popup:"components/popup",xdmessage:"components/bower/xdmessage/xdmessage",chooser:"src/js/chooser",config:["config/development","config/config"],version:"tmp/version",proxy:"src/js/proxy"},hbs:{templateExtension:"hbs",disableI18n:!0}}),n("chooser",["proxy","hbs!src/templates/styles.css","domHelper","popup"],function(e,t,n,r){var i=function(e){var r={container_id:"chute-chooser-"+parseInt(Math.random()*1e3),width:500,height:400,base_class:"chute-chooser",animation_duration:300,mode:i.Modes.system};this.callbacks={},this.customSteps={},this.options=n.extend({},r,e);if(!this.options.top){var s=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight;this.options.top=(n.windowSize().height-this.options.height)/2}if(this.options.mode===i.Modes.system){var o=window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,u=screen&&screen.width||document.width,a=Math.min(o,u),f=navigator.userAgent.match(/CriOS/);a<=400&&!f?this.options.mode=i.Modes.popup:this.options.mode=i.Modes.lightbox}this.options.mode===i.Modes.popup&&(this.options.popup=!0),n.addCSS(t({top:this.options.top,width:this.options.width,height:this.options.height,margin_left:this.options.width/2,animation_duration:this.options.animation_duration/1e3,base_class:this.options.base_class})),this.options.mode===i.Modes.lightbox&&(document.getElementById(this.options.container_id)?n.append(document.getElementById(this.options.container_id),'<div class="chute-chooser-close">&#215;</div>'):n.append(document.body,'<div id="'+this.options.container_id+'"><div class="chute-chooser-close">&#215;</div></div>')),this.options.mode===i.Modes.embed?(this.$container=document.getElementById(this.options.container_id),n.addClass(this.$container,"chute-chooser-mode-embed"),n.addClass(this.$container,this.options.base_class)):this.options.mode===i.Modes.lightbox&&(this.$container=document.getElementById(this.options.container_id),n.addClass(this.$container,"chute-chooser-mode-lightbox"),n.addClass(this.$container,this.options.base_class))};return i.prototype.setupOnce=function(t){this.proxy?typeof t=="function"&&t():(this.proxy=new e(this.$container,this.options),this.proxy.delegate=this,this.proxy.setupOnce(function(){typeof t=="function"&&t()}))},i.prototype.show=function(e){var t=this;this._showLoading(),setTimeout(function(){if(t.options.mode===i.Modes.embed)n.addClass(t.$container,"chute-chooser-open");else if(t.options.mode===i.Modes.lightbox){var e=new r(t.$container,{prefix:"chute-chooser"});e.on("close",function(){t._closed()}),e.open(),t.popop=e}},t.options.animation_duration),this.setupOnce(function(){n.removeClass(t.$container,"chute-chooser-opening"),t._doneLoading(),typeof e=="function"&&e()})},i.prototype.close=i.prototype.hide=function(){this.options.mode===i.Modes.embed?this._closed():this.options.mode===i.Modes.lightbox?(this.popop.close(),this.popop=null):this.options.mode===i.Modes.popup&&(this.proxy.close(),this.proxy=null)},i.prototype._showLoading=function(){this.$container&&(n.addClass(this.$container,"chute-chooser-opening"),n.addClass(this.$container,"loading"),n.append(this.$container,'<div class="loader"></div>'))},i.prototype._doneLoading=function(){if(this.$container){n.removeClass(this.$container,"loading");var e=n.getElementsByClassName(this.$container,"loader")[0];setTimeout(function(){n.remove(e)},150)}},i.prototype._closed=function(){var e=this;setTimeout(function(){e.proxy&&e.proxy.close(),e.proxy=null},this.options.animation_duration)},i.prototype.on=function(e,t){this.callbacks[e]=t},i.prototype.remoteEvent=function(e,t,n,r){var i=e.match("step:")!==undefined,s=e.replace("step:",t+":"),o=e.replace(/:/g,"_");if(i&&typeof this.callbacks[s]=="function"){var u=this.callbacks[s](n,r);typeof u!="undefined"&&r(u)}else if(typeof this.callbacks[e]=="function"){var u=this.callbacks[e](t,n,r);typeof u!="undefined"&&r(u)}else e==="window:open"?(window.open(n),r()):typeof this[o]=="function"?this[o](t,n,r):typeof r=="function"&&r()},i.prototype.alert=function(e,t){this.proxy.invoke("alert",{message:e,title:t})},i.prototype.setTheme=function(e){this.proxy.invoke("theme",e)},i.prototype.goToStep=function(e){this.proxy.invoke("goToStep",e)},i.prototype.$=function(e){var t=this;return{val:function(n,r){typeof n=="function"&&(r=n,n=undefined),t.proxy.invoke("$val",{selector:e,val:n},r)},html:function(n,r){typeof n=="function"&&(r=n,n=undefined),t.proxy.invoke("$html",{selector:e,html:n},r)},append:function(n,r){t.proxy.invoke("$append",{selector:e,html:n},r)},prepend:function(n,r){t.proxy.invoke("$prepend",{selector:e,html:n},r)},serialize:function(n){t.proxy.invoke("$serialize",e,n)},serializeArray:function(n){t.proxy.invoke("$serializeArray",e,n)}}},i.Modes={system:0,lightbox:1,embed:2,popup:3},i}),t("chooser")});